#!/bin/make
SHELL = /bin/sh

# Compiler macro
F77 = /opt/fortran/bin/f77

# Library builder program #1 (archiver).
AR = ar

# Library program #2 (inserts a table of contents into the archive).
# The archive is the UNIX rendition of a library.
RANLIB = ranlib

# These are the command-line flags to the archiver.
ARFLAGS = rvu

# Add extra compilation arguments here.
# Example FFLAG macro
FFLAGS = +O2 +U77

# List FORTRAN source modules. 
# Here we specify all the .f files in a macro.
# Notice the \ character to continue this macro.
# THERE MAY BE A LIMIT TO THE NUMBER OF LINES IN THE LIST!!
LIB_SOURCES = boundary.f\
            endomess.f\
            ierx.f\
            locpos.f\
            rdieee.f\
            unboustro.f\
            unpk_grib2.f\
            unpkbg.f\
            unpkbmap.f\
            unpk_temp40.f\
            unpk_temp41.f\
            unpk_temp42.f\
            unpk_temp48.f\
            unpk_temp49.f\
            unpk_temp420.f\
            unpk_temp430.f\
            unpk_trace.f\
            unpk_cylinder.f\
            unpk_equator.f\
            unpk_lambert.f\
            unpk_mercator.f\
            unpk_orthographic.f\
            unpk_polster.f\
            unpk_azimuth.f\
            unearth.f\
            unpkoo.f\
            unpkpo.f\
            unpkps.f\
            unpk_refer.f\
            unpksecdif.f\
            unpk_sect0.f\
            unpk_sect1.f\
            unpk_sect2.f\
            unpk_sect3.f\
            unpk_sect4.f\
            unpk_sect5.f\
            unpk_sect6.f\
            unpk_sect7.f\
            unpk_smple.f\
            unpkcmbm.f\
            unpk_cmplx.f\
            unpklxbm.f\
            unpklx.f\
            unpk_endian.f\
            timpr.f

              
# Now substitute all the .f extensions with .o 
# Here we specify all the object files in a macro.
LIB_OBJECTS = ${LIB_SOURCES:.f=.o} 

# Specify default rules for .F and .o files.
.SUFFIXES: .f .o

#-------------------- Rule for compiling a FORTRAN file ----------
.f.o :
	$(F77) -c $(FFLAGS) $<

# Library target.
libunpk_grib2lib.a:	${LIB_OBJECTS}
	$(AR) $(ARFLAGS) $@ $(LIB_OBJECTS)
	$(RANLIB) $@

# Dependencies for object files
